\documentclass[include/preamble.tex]{subfiles}
\begin{document}

\begin{frame}[fragile]
  \frametitle{options}
  \pause
  \begin{center}
    \begin{itemize}
    \item[]
      \begin{lstlisting}[style=scala]
sealed trait Option[+A]

case class  Some[+A](value: A) extends Option[A]
case object None extends Option[Nothing]
      \end{lstlisting}
      \vspace{1em}
      \pause
    \item
      put a value in an Option
      \newline
      \newline
      \pause
      \begin{tikzcd}[matrix scale=1, nodes={scale=1}]
        A
        \ar[rrr, visible on=<-3>]
        \ar[rrr, "some", visible on=<4->]
        & & & {Option[A]}
      \end{tikzcd}
      \pause
      \vspace{1em}
      \begin{lstlisting}[style=scala]
def some[A](a: A): Option[A] = Some(a)
      \end{lstlisting}
    \end{itemize}
  \end{center}
\end{frame}

\begin{frame}[fragile]
  \begin{center}
    \begin{itemize}
    \item[]
      \begin{lstlisting}[style=scala]
sealed trait Option[+A]

case class  Some[+A](value: A) extends Option[A]
case object None extends Option[Nothing]
      \end{lstlisting}
      \vspace{1em}
      \pause
    \item
      create an empty Option
      \newline
      \pause
      \begin{lstlisting}[style=scala]
def none[A]: Option[A] = None
      \end{lstlisting}
      \pause
      \vspace{1em}
      \begin{tikzcd}[matrix scale=1, nodes={scale=1}]
        1
        \ar[rrr, "none"]
        & & & {Option[A]}
      \end{tikzcd}
    \end{itemize}
  \end{center}
\end{frame}

\begin{frame}[fragile]
  \begin{center}
    \begin{tikzcd}[matrix scale=1, nodes={scale=1}]
      A \ar[rrr, "some"] & & & {Option[A]}
      \\
      1 \ar[rrr, "none"] & & & {Option[A]}
      \\
      |[visible on=<2->]| 1 + A
      \ar[visible on=<2->, rrr, "\lbrack {empty, some} \rbrack"]
      & & &
      |[visible on=<2->]| {Option[A]}
      \\
      |[visible on=<3->]| 1 + A
      & & &
      |[visible on=<3->]| {Option[A]}
      \ar[visible on=<3->, lll, swap, "???"]
    \end{tikzcd}
  \end{center}
\end{frame}

\begin{frame}[fragile]
  \begin{center}
    \begin{lstlisting}[style=scala]
def fold[A, B](x: Option[A])
              (ifEmpty: B)(f: A => B): B = ???
    \end{lstlisting}
    \pause
    \vspace{1em}
    \begin{lstlisting}[style=scala]
val x0  : Option[Int] = Some(2)
val res0: Int         = x0.fold(0)(_ * 10)
// 20

val x1  : Option[Int] = None
val res1: Int         = x1.fold(0)(_ * 10)
// 0
    \end{lstlisting}
  \end{center}
\end{frame}

\begin{frame}[fragile]
  \begin{center}
    \begin{lstlisting}[style=scala]
val x0  : Option[Int] = Some(2)
val res0: Int         = x0.fold(0)(_ * 10)
// 20

val x1  : Option[Int] = None
val res1: Int         = x1.fold(0)(_ * 10)
// 0

def fold[A, B](x: Option[A])
              (ifEmpty: B)(f: A => B): B =
  x match {
    case None    => ifEmpty
    case Some(a) => f(a)
  }
    \end{lstlisting}
  \end{center}
\end{frame}

\begin{frame}[fragile]
  \begin{center}
    \begin{lstlisting}[style=scala]
def fold[A, B](x: Option[A])
              (ifEmpty: B)(f: A => B): B =
  x match {
    case None    => ifEmpty
    case Some(a) => f(a)
  }
    \end{lstlisting}
    \begin{tikzcd}[matrix scale=1, nodes={scale=1}]
      {Option[A]} \arrow[rrr, "fold"] & & & B
      \\
      1 \arrow[rrr, "ifEmpty"] & & & B
      \\
      A \arrow[rrr, "f"] & & & B
    \end{tikzcd}
  \end{center}
\end{frame}

\begin{frame}[fragile]
  \begin{center}
    \begin{lstlisting}[style=scala]
def fold[A, B](x: Option[A])
              (ifEmpty: B)(f: A => B): B =
  x match {
    case None    => ifEmpty
    case Some(a) => f(a)
  }
    \end{lstlisting}
    \begin{tikzcd}[matrix scale=1, nodes={scale=1}]
      {Option[A]} \arrow[rrr, "fold"] & & & B
      \\
      1 + A \arrow[rrr, "\lbrack {ifEmpty, f} \rbrack"] & & & B
    \end{tikzcd}
  \end{center}
\end{frame}

\begin{frame}[fragile]
  \begin{center}
    \begin{lstlisting}[style=scala]
def fold[A, B](x: Option[A])
              (ifEmpty: B)(f: A => B): B =
  x match {
    case None    => ifEmpty
    case Some(a) => f(a)
  }
    \end{lstlisting}
    \begin{tikzcd}[matrix scale=1, nodes={scale=1}]
      {Option[A]}
      \arrow[rr, "fold"]
      \arrow[rd, swap, "match", visible on=<2->]
      & & B
      \\
        & 1 + A \arrow[ru, swap, "\lbrack {ifEmpty, f} \rbrack"] &
    \end{tikzcd}
  \end{center}
\end{frame}


\end{document}
